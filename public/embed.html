<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>RESG ECO Form</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/eco-form.css" />
    <style>
      /* no extra scrollbars/margins in the iframe */
      html,
      body {
        margin: 0;
        padding: 0;
        background: transparent;
      }
    </style>
  </head>
  <body>
    <div id="eco-form" data-api="/api"></div>

    <script src="/eco-form.js"></script>

    <script>
      (function () {
        function sendHeight() {
          var h =
            document.documentElement.scrollHeight ||
            document.body.scrollHeight ||
            0;

          if (window.parent) {
            window.parent.postMessage(
              {
                type: "ecoform-height",
                height: h,
              },
              "*"
            );
          }
        }

        // initial + small delay in case fonts/layout shift
        window.addEventListener("load", function () {
          sendHeight();
          setTimeout(sendHeight, 300);
        });

        // whenever the content changes size, tell the parent
        if (window.ResizeObserver) {
          var ro = new ResizeObserver(function () {
            sendHeight();
          });
          ro.observe(document.body);
        } else {
          // fallback: ping occasionally
          setInterval(sendHeight, 500);
        }
      })();
    </script>
  </body>
</html>
